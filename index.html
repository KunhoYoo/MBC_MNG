<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>MNG ÌòÑÌô©Ìåê (2Ïª¨Îüº/Î∞òÏùëÌòï) ‚Äì FIX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Barun+Gothic&display=swap" rel="stylesheet">

  <style>
    :root{
      --brand:#1477C9;
      --brand-soft:#E7F1FB;
      --ink:#0F172A;
      --muted:#5B6C80;
      --line:#E6EBF2;
      --bg:#F6F9FD;
      --card:#FFFFFF;
      --success:#16A34A;
      --radius:16px;
      --shadow:0 10px 30px rgba(20,119,201,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      font-family:'Nanum Barun Gothic',system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,sans-serif;
      background:var(--bg); color:var(--ink);
      margin:0; padding:0;
      -webkit-font-smoothing:antialiased;
      -webkit-tap-highlight-color:transparent;
      min-height:100vh;
      display:flex; align-items:center; justify-content:center;
    }
    img.logo{ cursor:pointer; max-width:360px; width:min(58%, 360px); display:block; margin:18px auto 12px; }

    /* Screens */
    #login-page,#status-page,#issue-page{display:none; width:100%;}
    #login-page.active{display:flex}
    .screen{ width:100%; }
    .container{max-width:1200px; margin:0 auto; padding:16px}

    /* Center login vertically & horizontally */
    #login-page{
      min-height:100vh;
      align-items:center; justify-content:center; flex-direction:column;
      padding:24px;
    }
    .login-card{ width:min(680px, 92vw); background:var(--card); padding:22px; border-radius:20px; box-shadow:var(--shadow); border:1px solid var(--line); }
    .login-grid{display:grid; grid-template-columns:1fr; gap:12px}
    .login-actions{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    input[type="password"], input[type="text"], select{
      width:100%; padding:14px 16px; border:1px solid var(--line); border-radius:12px; font-size:16px; background:#fff; outline:none;
    }
    input:focus, select:focus{ border-color:var(--brand); box-shadow:0 0 0 4px rgba(20,119,201,.15); }
    .btn{ padding:12px 14px; border:none; border-radius:12px; cursor:pointer; font-weight:700; background:var(--brand); color:#fff; box-shadow:var(--shadow); }
    .btn.secondary{background:#fff; color:var(--brand); border:1px solid var(--brand)}
    .login-footer{margin-top:6px; text-align:center; color:var(--muted); font-weight:700}
    .emoji{font-size:16px}

    /* Tables grid: mobile 1-col, desktop 2-col */
    .tables-grid{display:grid; grid-template-columns:1fr; gap:16px;}
    @media (min-width: 1024px){
      .tables-grid{grid-template-columns:1fr 1fr;}
    }

    .table-wrap{ background:var(--card); border:1px solid var(--line); border-radius:18px; box-shadow:var(--shadow); overflow:hidden;}
    table{width:100%; border-collapse:collapse; table-layout:fixed}
    thead th{
      background:linear-gradient(180deg, var(--brand-soft), #F3F8FF);
      color:#133559; font-weight:800; font-size:14px; letter-spacing:.2px;
      text-align:left; padding:10px 12px; border-bottom:1px solid var(--line);
      position:sticky; top:0; z-index:2;
      white-space:nowrap;
    }
    thead th:first-child{width:110px}
    thead th:nth-child(2), thead th:nth-child(3), thead th:nth-child(4){width:28%}
    thead th:last-child{width:90px; text-align:center}

    tbody tr{border-bottom:1px solid var(--line); background:#fff}
    tbody tr.used td.left-stamp{border-left:6px solid var(--success)}
    tbody tr.unused td.left-stamp{border-left:6px solid #CBD5E1}
    tbody td{padding:8px 10px; vertical-align:middle}
    tbody td:last-child{text-align:center}

    .chip{ display:inline-flex; align-items:center; justify-content:center;
      padding:6px 10px; border-radius:999px; font-weight:800; font-size:13px; border:1px solid var(--line); background:#fff; cursor:pointer; }
    .chip-used{ border-color:rgba(22,163,74,.45); background:linear-gradient(180deg,#E7F7EE,#F3FBF6); color:#065F46}
    .chip-idle{ border-color:#E5E7EB; background:#F8FAFC; color:#334155}

    input[type="text"]{ width:100%; padding:10px 12px; border:1px solid #D7DFEA; border-radius:12px; font-size:14px; outline:none; background:#fff; }
    input[type="text"]::placeholder{color:#9DA8B8}
    input[type="text"]:focus{ border-color:var(--brand); box-shadow:0 0 0 4px rgba(20,119,201,.12); }

    .reset{ width:38px; height:38px; display:inline-flex; align-items:center; justify-content:center;
      border-radius:999px; background:#FEE2E2; color:#B91C1C; border:1px solid #FCA5A5; cursor:pointer; }

    /* Compact mobile */
    @media (max-width:720px){
      .container{padding:10px}
      thead th{font-size:13px; padding:9px 10px}
      tbody td{padding:7px 8px}
      .chip{font-size:12px; padding:5px 8px}
      .reset{width:32px; height:32px}
    }
    @media (max-width:480px){
      thead th{ font-size:12px; }
      th, td{ padding-left:6px; padding-right:6px; }
      td:nth-child(1){ width:84px; }
      td:nth-child(5){ width:56px; }
      input[type="text"]{ height:32px; font-size:12px; padding:4px 8px; border-radius:10px; }
      .chip{ padding:5px 8px; font-size:12px; }
      .reset{ width:34px; height:34px; min-width:34px; min-height:34px; }
    }

    /* Issue */
    .issue-card{ max-width:560px; margin:24px auto; background:var(--card); border:1px solid var(--line); border-radius:22px; box-shadow:var(--shadow); padding:18px; display:grid; gap:12px;}
    .issue-row{display:grid; gap:8px}
    .issue-grid{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    .issue-submit{display:block}
    .btn-issue{ width:100%; padding:12px 14px; border:none; border-radius:12px; cursor:pointer; font-weight:600; background:linear-gradient(180deg, #1e6fd1, #1159b2); color:#fff; box-shadow:var(--shadow); }
  </style>
</head>
<body>
  <!-- Login -->
  <div id="login-page" class="screen active">
    <img src="title_logo.png" class="logo" alt="ÌÉÄÏù¥ÌãÄ Î°úÍ≥†">
    <div class="login-card">
      <div class="login-grid">
        <input id="login-code" type="password" placeholder="ÏΩîÎìúÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
        <div class="login-actions">
          <button id="btn-login-status" class="btn">ÌòÑÌô©</button>
          <button id="btn-login-issue" class="btn secondary">Î∂àÏ∂ú</button>
        </div>
        <div class="login-footer">MNG ÌòÑÌô© ÏµúÏã†Ìôî Ïûò Î∂ÄÌÉÅÎìúÎ¶ΩÎãàÎã§ üì°</div>
      </div>
    </div>
  </div>

  <!-- Status Page -->
  <div id="status-page" class="screen">
    <img src="title_logo.png" class="logo" alt="ÌÉÄÏù¥ÌãÄ Î°úÍ≥†" onclick="toLogin()">
    <div class="container">
      <div class="tables-grid">
        <!-- ÏôºÏ™Ω 10Í∞ú -->
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>No.</th>
                <th>ÏÇ¨Ïö©Ïûê</th>
                <th>Î∂àÏ∂úÏûê</th>
                <th>ÏúÑÏπò</th>
                <th>Î∞òÎÇ©</th>
              </tr>
            </thead>
            <tbody id="mng-left"></tbody>
          </table>
        </div>

        <!-- Ïò§Î•∏Ï™Ω 10Í∞ú -->
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>No.</th>
                <th>ÏÇ¨Ïö©Ïûê</th>
                <th>Î∂àÏ∂úÏûê</th>
                <th>ÏúÑÏπò</th>
                <th>Î∞òÎÇ©</th>
              </tr>
            </thead>
            <tbody id="mng-right"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Issue Page -->
  <div id="issue-page" class="screen">
    <img src="title_logo.png" class="logo" alt="ÌÉÄÏù¥ÌãÄ Î°úÍ≥†" onclick="toLogin()">
    <div class="issue-card">
      <div class="issue-row">
        <label for="issue-mng" style="font-weight:800">MNG ÏÑ†ÌÉù</label>
        <select id="issue-mng"></select>
      </div>
      <div class="issue-grid">
        <div class="issue-row">
          <label style="font-weight:800">ÏÇ¨Ïö©Ïûê</label>
          <input id="issue-user" type="text" placeholder="Ïù¥Î¶Ñ">
        </div>
        <div class="issue-row">
          <label style="font-weight:800">Î∂àÏ∂úÏûê</label>
          <input id="issue-issuer" type="text" placeholder="ÏûêÎèô ÏûÖÎ†•" disabled>
        </div>
      </div>
      <div class="issue-row">
        <label style="font-weight:800">ÏúÑÏπò</label>
        <input id="issue-region" type="text" placeholder="Ïòà: Í∞ïÎÇ®">
      </div>
      <div class="issue-submit">
        <button id="btn-issue-submit" class="btn-issue">Î∂àÏ∂ú</button>
      </div>
    </div>
  </div>

  <!-- JS (module) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";

    // ==== Firebase ====
    const firebaseConfig = {
      apiKey: "AIzaSyADWorIbKPZZoWx7qAriiCA2lYtf-MSdAA",
      authDomain: "mbc-mng.firebaseapp.com",
      databaseURL: "https://mbc-mng-default-rtdb.firebaseio.com",
      projectId: "mbc-mng",
      storageBucket: "mbc-mng.firebasestorage.app",
      messagingSenderId: "845487713315",
      appId: "1:845487713315:web:d8559559fa98870fde5596"
    };
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // ==== State ====
    const CODE_TO_USER = {
  "dbrjsgh": "Ïú†Í±¥Ìò∏",
  "rlawnsgml":"ÍπÄÏ§ÄÌù¨",
  "dlwlgns":"Ïù¥ÏßÄÌõà",
  "gkstldn":"ÌïúÏãúÏö∞",
  "didtmdghks":"ÏñëÏäπÌôò",
  "wjseowns":"Ï†ÑÎåÄÏ§Ä",
  "dlgmdfyd":"Ïù¥Ìù•Î£°",
  "tlscjfdks":"Ïã†Ï≤†Ïïà",
  "wlstkdgns":"ÏßÑÏÉÅÌõà",
  "rlaxogy":"ÍπÄÌÉúÌö®",
  "dlwhdgur":"Ïù¥Ï¢ÖÌòÅ",
  "rlatmdals": "ÍπÄÏäπÎØº",
  "dlwlsgks": "Ïù¥ÏßÑÌïú",
  "rlawodnd": "ÍπÄÏû¨ÏõÖ",
  "didguswls": "ÏñëÌòÑÏßÑ",
  "fbtmdgh": "Î•òÏäπÌò∏",
  "vuswoghks": "Ìé∏Ïû¨Ìôò",
  "rlaalswns": "ÍπÄÎØºÏ§Ä",
  "wjdgnldyd": "Ï†ïÌúòÏö©",
  "wjdwlgur": "Ï†ïÏßÄÌòÅ",
  "rladudwls": "ÍπÄÏòÅÏßÑ",
  "rlawotmd": "ÍπÄÏû¨Ïäπ",
  "rlaxowns": "ÍπÄÌÉúÏ§Ä",
  "qorcksgus": "Î∞±Ï∞¨ÌòÑ",
  "dlgusdyd": "Ïù¥ÌòÑÏö©",
  "tlaalswns": "Ïã¨ÎØºÏ§Ä",
  "qkrwndud": "Î∞ïÏ£ºÏòÅ",
  "dlwogk": "Ïù¥Ïû¨Ìïò",
  "dlalstkd": "Ïù¥ÎØºÏÉÅ",
  "ckalsdnr": "Ï∞®ÎØºÏö±",
  "rlawhddns": "ÍπÄÏ¢ÖÏö¥",
  "dksghdcks": "ÏïàÌôçÏ∞¨",
  "qkrwogud": "Î∞ïÏû¨Ìòï",
  "dydalswnd": "Ïö©ÎØºÏ§ë",
  "dbstjrwns": "Ïú§ÏÑùÏ§Ä",
  "quswnsgml": "Î≥ÄÏ§ÄÌù¨",
  "qkrgustn": "Î∞ïÌòÑÏàò",
  "rnjsehddh": "Í∂åÎèôÏò§",
  "ghdtjddh": "ÌôçÏÑ±Ïò§",
  "rlarudgus": "ÍπÄÍ≤ΩÌòÑ",
  "rnjswlsaud": "Í∂åÏßÑÎ™Ö",
  "dlghkswns": "Ïù¥ÌôòÏ§Ä",
  "didguswns": "ÏñëÌòÑÏ§Ä",
  "dlgkswns": "Ïù¥ÌïúÏ§Ä",
  "tlswpdyd": "Ïã†Ï†úÏö©",
  "wkdtpdnjs": "Ï†ïÏÑ∏Ïõê",
  "rlaalsrb": "ÍπÄÎØºÍ∑ú",
  "dldPeh": "Ïù¥ÏòàÎèÑ",
  "qkralscks": "Î∞ïÎØºÏ∞¨",
  "rlathdgus": "ÍπÄÏÜ°ÌòÑ",
  "qkrwjdejr": "Î∞ïÏ†ïÎçï",
  "wkdwodms": "Ïû•Ïû¨ÏùÄ",
  "wkddudrms": "Ïû•ÏòÅÍ∑º"
    };
    const MNG_NUMBERS = [1,2,3,4,5,6,7,8,9,10,17,18,19,20,21,22,23,24,25,26];
    const mngList = MNG_NUMBERS.map(n => ({ num: `MNG-${String(n).padStart(2,'0')}`, vj:'', audio:'', region:'' }));
    let histories = {};
    let currentUserName = "";
    let intendedMode = "status"; // 'status' or 'issue'

    function isUsed(item){
      return Boolean((item.vj||'').trim() || (item.audio||'').trim() || (item.region||'').trim());
    }
    function formatKTime(d){
      const pad = (x)=> String(x).padStart(2,'0');
      return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${pad(d.getHours())}Ïãú${pad(d.getMinutes())}Î∂Ñ`;
    }
    function rowEl(num){ return document.querySelector(`tr[data-num="${num}"]`); }
    function setRowClass(num){
      const item = mngList.find(m=>m.num===num);
      const r = rowEl(num);
      if (!r || !item) return;
      r.classList.toggle('used', isUsed(item));
      r.classList.toggle('unused', !isUsed(item));
      const chip = r.querySelector('.chip');
      if (chip){
        chip.classList.toggle('chip-used', isUsed(item));
        chip.classList.toggle('chip-idle', !isUsed(item));
      }
    }

    function appendHistory(num, entry){
      const arr = histories[num] ? [...histories[num]] : [];
      arr.unshift(entry);
      histories[num] = arr.slice(0,5);
      return set(ref(db, `mngHistory/${num}`), histories[num]);
    }

    function buildTableOnce(){
      const tbodyLeft  = document.getElementById('mng-left');
      const tbodyRight = document.getElementById('mng-right');
      if (!tbodyLeft || !tbodyRight) return;
      tbodyLeft.innerHTML = '';
      tbodyRight.innerHTML = '';
      mngList.forEach((item, idx)=>{
        const tr = document.createElement('tr');
        tr.dataset.num = item.num;
        tr.className = 'unused';
        tr.innerHTML = `
          <td class="left-stamp">
            <button class="chip chip-idle" data-history="${item.num}">${item.num}</button>
          </td>
          <td><input type="text" data-field="vj" placeholder="Ïù¥Î¶Ñ"></td>
          <td><input type="text" data-field="audio" placeholder="Ïù¥Î¶Ñ"></td>
          <td><input type="text" data-field="region" placeholder="Ïòà: Í∞ïÎÇ®"></td>
          <td class="action-cell">
            <button class="reset" data-reset="${item.num}" title="Î∞òÎÇ©(Ï¥àÍ∏∞Ìôî)" aria-label="Î∞òÎÇ©">‚ü≤</button>
          </td>`;
        (idx < 10 ? tbodyLeft : tbodyRight).appendChild(tr);
      });

      // Delegate events to avoid missing listeners
      [tbodyLeft, tbodyRight].forEach(tbody=>{
        tbody.addEventListener('input', (e)=>{
          const inp = e.target.closest('input[data-field]'); if(!inp) return;
          const tr = e.target.closest('tr'); if(!tr) return;
          const num = tr.dataset.num;
          const field = inp.dataset.field;
          const item = mngList.find(m=>m.num===num);
          if (!item) return;
          item[field] = inp.value;
          setRowClass(num);
          refreshIssueDropdown();
        });
        tbody.addEventListener('click', async (e)=>{
          const resetBtn = e.target.closest('button[data-reset]');
          if (resetBtn){
            const num = resetBtn.dataset.reset;
            const item = mngList.find(m=>m.num===num);
            if (!item) return;
            if (!confirm('Ìï¥Îãπ MNG Î∞òÎÇ©Ï≤òÎ¶¨ ÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return;
            if (isUsed(item)){
              await appendHistory(num, { vj:item.vj||'', audio:item.audio||'', region:item.region||'', returnedAt:new Date().toISOString() });
            }
            item.vj = item.audio = item.region = '';
            const tr = rowEl(num);
            if (tr){ tr.querySelectorAll('input').forEach(i=> i.value=''); }
            setRowClass(num);
            await set(ref(db, `mngData/${num}`), { vj:'', audio:'', region:'' });
            refreshIssueDropdown();
            return;
          }
          const histBtn = e.target.closest('button[data-history]');
          if (histBtn){
            const num = histBtn.dataset.history;
            const arr = histories && histories[num] ? histories[num] : [];
            if (!arr.length){ alert(`<${num} Í≥ºÍ±∞ Í∏∞Î°ù>\nÍ∏∞Î°ùÏù¥ ÏóÜÏäµÎãàÎã§.`); return; }
            const safeTime = (ts)=>{
              if (!ts) return '-';
              const d = new Date(ts);
              return isNaN(d) ? '-' : formatKTime(d);
            };
            const lines = arr.map(e => {
              const ts = e.returnedAt || e.issuedAt;
              const action = e.returnedAt ? 'Î∞òÎÇ©' : (e.issuedAt ? 'Î∂àÏ∂ú' : '');
              const timeStr = safeTime(ts);
              return `${e.vj||'-'} / ${e.audio||'-'} / ${e.region||'-'} / ${timeStr} ${action}`;
            });
            alert(`<${num} Í≥ºÍ±∞ Í∏∞Î°ù>\n` + lines.join('\n'));
          }
        });
      });
    }

    function populateFromSnapshot(data){
      mngList.forEach(item => {
        if (data && data[item.num]){ Object.assign(item, data[item.num]); }
        const r = rowEl(item.num);
        if (r){
          const vj = r.querySelector('input[data-field="vj"]');
          const au = r.querySelector('input[data-field="audio"]');
          const re = r.querySelector('input[data-field="region"]');
          if (vj && vj !== document.activeElement) vj.value = item.vj || '';
          if (au && au !== document.activeElement) au.value = item.audio || '';
          if (re && re !== document.activeElement) re.value = item.region || '';
          setRowClass(item.num);
        }
      });
      refreshIssueDropdown();
    }

    function syncToFirebase(){
      const dataObj = {};
      mngList.forEach(item => { dataObj[item.num] = { vj:item.vj||'', audio:item.audio||'', region:item.region||'' }; });
      set(ref(db, 'mngData'), dataObj);
    }

    function loadInitialData(){
      onValue(ref(db, 'mngData'), snap => populateFromSnapshot(snap.val()));
      onValue(ref(db, 'mngHistory'), snap => { histories = snap.val() || {}; });
    }

    // ==== Issue helpers ====
    function buildIssueDropdown(all=true){
      const issueMngSel = document.getElementById('issue-mng');
      if (!issueMngSel) return;
      issueMngSel.innerHTML = '<option value="" disabled selected>ÏÑ†ÌÉù</option>';
      MNG_NUMBERS.forEach(n=>{
        const label = `MNG-${String(n).padStart(2,'0')}`;
        if (!all){
          const item = mngList.find(m=>m.num===label);
          if (item && isUsed(item)) return;
        }
        const opt = document.createElement('option');
        opt.value = label; opt.textContent = label;
        issueMngSel.appendChild(opt);
      });
    }
    function refreshIssueDropdown(){ buildIssueDropdown(false); }

    async function submitIssue(){
      const issueMngSel = document.getElementById('issue-mng');
      const issueUser = document.getElementById('issue-user');
      const issueRegion = document.getElementById('issue-region');
      if (!issueMngSel) return;

      const mng = issueMngSel.value;
      const user = (issueUser?.value || '').trim();
      const region = (issueRegion?.value || '').trim();
      if (!mng){ alert('MNGÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.'); return; }
      if (!user){ alert('ÏÇ¨Ïö©Ïûê Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.'); return; }
      if (!region){ alert('ÏúÑÏπòÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.'); return; }
      await appendHistory(mng, { vj:user, audio: currentUserName || '', region, issuedAt: new Date().toISOString() });
      await set(ref(db, `mngData/${mng}`), { vj:user, audio: currentUserName || '', region });
      alert('Î∂àÏ∂ú ÎêòÏóàÏäµÎãàÎã§!');
      if (issueUser) issueUser.value = '';
      if (issueRegion) issueRegion.value = '';
      refreshIssueDropdown();
    }

    // ==== Login & routing (bind after DOMContentLoaded) ====
    window.addEventListener('DOMContentLoaded', () => {
      const loginPage  = document.getElementById('login-page');
      const statusPage = document.getElementById('status-page');
      const issuePage  = document.getElementById('issue-page');
      const codeInput  = document.getElementById('login-code');
      const btnStatus  = document.getElementById('btn-login-status');
      const btnIssue   = document.getElementById('btn-login-issue');
      const btnIssueSubmit = document.getElementById('btn-issue-submit');

      function toLogin(){
        statusPage.style.display = 'none';
        issuePage.style.display = 'none';
        loginPage.style.display = 'flex';
        loginPage.classList.add('active');
      }
      window.toLogin = toLogin; // expose

      function chooseMode(mode){ intendedMode = mode; }
      function login(){
        const code = codeInput.value.trim();
        if (CODE_TO_USER[code]){
          currentUserName = CODE_TO_USER[code];
          loginPage.style.display = 'none';
          loginPage.classList.remove('active');
          if (intendedMode === 'issue'){
            issuePage.style.display = 'block';
            buildIssueDropdown(false);
            const issuer = document.getElementById('issue-issuer');
            if (issuer) issuer.value = currentUserName || '';
            loadInitialData();
          }else{
            statusPage.style.display = 'block';
            buildTableOnce();
            loadInitialData();
            setInterval(syncToFirebase, 5000);
          }
        }else{
          alert('ÏûòÎ™ªÎêú Î°úÍ∑∏Ïù∏ ÏΩîÎìúÏûÖÎãàÎã§.');
        }
      }

      if (btnStatus) btnStatus.addEventListener('click', ()=>{ chooseMode('status'); login(); });
      if (btnIssue)  btnIssue.addEventListener('click',  ()=>{ chooseMode('issue');  login(); });
      if (btnIssueSubmit) btnIssueSubmit.addEventListener('click', submitIssue);
      if (codeInput) codeInput.addEventListener('keydown', e=>{ if (e.key==='Enter'){ chooseMode('status'); login(); } });
    });
  </script>
</body>
</html>
